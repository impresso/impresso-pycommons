Search.setIndex({"docnames": ["images", "index", "io", "rebuild", "utils"], "filenames": ["images.rst", "index.rst", "io.rst", "rebuild.rst", "utils.rst"], "titles": ["Image handling", "Welcome to Impresso PyCommons\u2019s documentation!", "Input/Output", "Text Rebuild", "Utilities"], "terms": {"class": [0, 2, 4], "impresso_common": [0, 2, 3, 4], "img_util": 0, "boxstrategi": 0, "valu": [0, 2, 4], "name": [0, 2, 3, 4], "none": [0, 2, 3, 4], "modul": [0, 1], "qualnam": 0, "type": [0, 2, 3, 4], "start": [0, 4], "boundari": 0, "base": [0, 2, 3, 4], "enum": 0, "jpg_highest": 0, "jpg_uniq": 0, "png_highest": 0, "png_uniq": 0, "compos": 0, "path_img_on": 0, "path_img_two": 0, "path_img_thre": 0, "get_img_from_arch": 0, "archiv": [0, 3, 4], "path_check": 0, "ext_check": 0, "name_check": 0, "get_imgdimens": 0, "image_data": 0, "return": [0, 2, 3, 4], "height": 0, "width": 0, "get_jpg": 0, "page_digit": 0, "get_page_fold": 0, "get_png": 0, "get_tif": 0, "run_cmd": 0, "cmd": 0, "execut": 0, "shell": 0, "result": [0, 4], "stdout": 0, "stderr": 0, "function": [0, 1], "support": 0, "re": 0, "comput": [0, 4], "coordin": [0, 3, 4], "olive_box": 0, "compute_box": 0, "scale_factor": 0, "input_box": 0, "iiif": [0, 4], "rel": 0, "paramet": [0, 2, 3, 4], "float": 0, "ratio": 0, "between": 0, "differ": [0, 3, 4], "dimens": 0, "str": [0, 2, 3, 4], "string": [0, 2, 3, 4], "separ": [0, 2, 4], "space": 0, "new": [0, 4], "compute_scale_factor": 0, "img_source_path": 0, "img_dest_path": 0, "x": 0, "scale": [0, 3], "factor": 0, "bewteen": 0, "full": 0, "path": [0, 2, 3, 4], "sourc": [0, 4], "destin": 0, "convert_box": 0, "convert": [0, 4], "y": 0, "w": 0, "h": 0, "upper": 0, "left": 0, "lower": 0, "right": 0, "get_iiif_url": 0, "page_id": 0, "http": [0, 3, 4], "dhlabsrv17": [0, 4], "epfl": [0, 3, 4], "ch": [0, 4], "iiif_impresso": [0, 4], "iiif_manifest_uri": 0, "pct": [0, 4], "bool": [0, 3, 4], "fals": [0, 2, 4], "impresso": [0, 2, 3, 4], "url": [0, 4], "given": [0, 3, 4], "page": [0, 2, 3, 4], "id": [0, 2, 3, 4], "e": [0, 2, 3, 4], "g": [0, 2, 3, 4], "exp": 0, "1930": 0, "06": 0, "10": [0, 2, 4], "p0001": [0, 2, 4], "blank": [0, 2], "get_scale_factor": 0, "issue_dir_path": 0, "page_xml": 0, "box_strategi": 0, "img_source_nam": 0, "context": [0, 4], "strategi": 0, "choos": 0, "issu": [0, 2, 3, 4], "zipfil": 0, "zip": 0, "byte": 0, "xml": 0, "handler": 0, "found": [0, 4], "info": [0, 3], "txt": [0, 2], "from": [0, 1, 3, 4], "jp2": 0, "folder": 0, "hopefulli": 0, "correct": 0, "librari": [0, 4], "take": [0, 2, 4], "best": 0, "avail": 0, "highest": 0, "were": 0, "accord": [0, 2], "an": [0, 2, 3, 4], "which": [0, 3, 4], "we": 0, "have": [0, 4], "identifi": 0, "among": 0, "format": [0, 3, 4], "coverag": 0, "i": [0, 1, 3, 4], "devis": 0, "The": [0, 3, 4], "present": 0, "file": [0, 1], "wa": [0, 3], "dest": 0, "can": [0, 3, 4], "therefor": 0, "us": [0, 2, 3, 4], "need": [0, 4], "read": [0, 2, 3, 4], "normal": 0, "In": 0, "thi": [0, 3, 4], "acquir": 0, "It": [0, 3, 4], "look": 0, "also": 0, "took": 0, "ocr": [0, 4], "possibl": [0, 4], "reli": 0, "resolut": 0, "indic": 0, "should": [0, 4], "same": 0, "our": [0, 2, 3, 4], "n": [0, 4], "b": [0, 2, 3, 4], "heigth": 0, "do": 0, "correspond": 0, "usual": 0, "discrep": [0, 4], "tag": 0, "images_resolut": 0, "hand": 0, "page_width": 0, "other": 0, "seem": [0, 4], "ignor": 0, "current": 0, "here": [0, 4], "ar": [0, 2, 4], "equal": 0, "To": 0, "check": [0, 2, 4], "happen": 0, "choic": 0, "acquisit": 0, "addit": 0, "see": [0, 2, 3], "ones": 0, "danger": 0, "anoth": 0, "did": 0, "provid": 0, "thing": 0, "fit": 0, "like": 0, "test": 0, "move": 0, "proper": [0, 4], "unit": 0, "python": 1, "bit": 1, "code": [1, 2], "object": [1, 2, 3, 4], "highli": 1, "reusabl": [1, 4], "within": [1, 2], "input": [1, 3, 4], "output": [1, 3, 4], "gener": [1, 4], "o": [1, 4], "system": 1, "s3": [1, 3], "text": [1, 4], "rebuild": 1, "helper": 1, "config": [1, 2], "exampl": [1, 2, 4], "util": [1, 3], "basic": [1, 3], "dask": [1, 2, 3], "apach": 1, "uima": 1, "xmi": 1, "loader": 1, "imag": [1, 2], "handl": [1, 4], "oliv": 1, "box": [1, 4], "id2issuedir": 2, "todo": [2, 3], "document": [2, 3], "parse_canonical_filenam": 2, "filenam": [2, 4], "pars": 2, "canon": [2, 3, 4], "its": [2, 3], "compon": 2, "tupl": [2, 3, 4], "gdl": [2, 3, 4], "1950": 2, "01": 2, "02": 2, "i0002": 2, "2": [2, 3, 4], "": [2, 3, 4], "directori": [2, 3, 4], "structur": 2, "path_f": 2, "contentitem": [2, 4], "alia": 2, "item": [2, 4], "issuedir": [2, 3, 4], "journal": 2, "date": [2, 4], "edit": 2, "field": 2, "number": [2, 3, 4], "1": [2, 3, 4], "0": [2, 3, 4], "3": 2, "canonical_path": 2, "dir": [2, 3], "extens": [2, 4], "path_typ": 2, "creat": [2, 3, 4], "repres": 2, "newspap": [2, 3, 4], "onli": [2, 4], "build": 2, "check_filenam": 2, "file_basenam": 2, "whether": [2, 3, 4], "compli": 2, "convent": 2, "1900": [2, 3], "detect_canonical_issu": 2, "base_dir": 2, "detect": [2, 4], "import": 2, "nb": [2, 3, 4], "invalid": 2, "skip": 2, "warn": [2, 4], "messag": 2, "log": [2, 3, 4], "root": [2, 3], "list": [2, 3, 4], "consid": [2, 4], "acronym": 2, "instanc": [2, 4], "detect_issu": 2, "journal_filt": 2, "exclud": 2, "basestr": 2, "set": [2, 3, 4], "filter": [2, 3, 4], "posit": 2, "neg": 2, "boolean": [2, 3, 4], "detect_journal_issu": 2, "get_issueshortpath": 2, "short": [2, 4], "version": [2, 4], "pair_issu": 2, "issue_list1": 2, "issue_list2": 2, "associ": 2, "pair": 2, "origin": 2, "repositori": [2, 4], "arrai": 2, "contain": [2, 3, 4], "issue1": 2, "issue2": 2, "select_issu": 2, "config_dict": [2, 4], "inp_dir": 2, "configur": [2, 3, 4], "select": 2, "md": [2, 3], "explan": 2, "usag": [2, 3, 4], "config_fil": 2, "isfil": 2, "open": [2, 3], "r": 2, "f": [2, 3, 4], "json": [2, 3, 4], "load": [2, 4], "els": 2, "dict": [2, 3, 4], "dit": 2, "where": [2, 3, 4], "get": [2, 3, 4], "path_s3": 2, "issuedirectori": 2, "impresso_iter_bucket": 2, "bucket_nam": [2, 3, 4], "item_typ": 2, "prefix": [2, 4], "filter_config": 2, "partition_s": 2, "15": [2, 4], "iter": 2, "over": 2, "bucket": [2, 3, 4], "possibli": 2, "either": 2, "valid": 2, "data": [2, 3, 4], "individu": 2, "content": [2, 4], "articl": [2, 3, 4], "param": [2, 4], "kei": [2, 3, 4], "exclus": 2, "year": [2, 3, 4], "interv": 2, "1960": 2, "jdg": 2, "1890": 2, "last": [2, 4], "partit": [2, 4], "size": [2, 4], "read_s3_issu": 2, "input_bucket": [2, 3], "s3contentitem": 2, "key_nam": [2, 4], "doc_typ": 2, "rebuilt_vers": 2, "canonical_vers": 2, "s3_filter_arch": 2, "suffix": 2, "jsonl": [2, 4], "bz2": [2, 4], "k": 2, "v": 2, "time": 2, "rubric": 2, "1970": 2, "all": [2, 3, 4], "empti": 2, "mean": 2, "1798": 2, "1999": [2, 3], "each": [2, 4], "10th": 2, "sequenc": 2, "key_suffix": 2, "end": 2, "s3_iter_bucket": 2, "get_bucket": [2, 4], "mybucket": 2, "begin": 2, "how": 2, "A": [3, 4], "transform": 3, "purpos": 3, "cli": 3, "For": 3, "member": 3, "script": 3, "run": 3, "runai": 3, "github": 3, "com": 3, "infrastructur": 3, "blob": 3, "main": [3, 4], "howto": 3, "py": [3, 4], "rebuild_articl": 3, "od": 3, "fc": 3, "fo": 3, "schedul": 3, "sch": 3, "ob": 3, "verbos": [3, 4], "clear": 3, "languag": 3, "lg": 3, "nworker": 3, "nw": 3, "option": [3, 4], "rebuilt": [3, 4], "upload": [3, 4], "specifi": [3, 4], "otherwis": 3, "tell": 3, "exist": [3, 4], "ll": 3, "one": [3, 4], "level": 3, "debug": 3, "default": [3, 4], "remov": 3, "befor": 3, "after": [3, 4], "stuff": 3, "worker": [3, 4], "local": 3, "client": [3, 4], "cleanup": 3, "upload_success": 3, "filepath": 3, "ha": 3, "been": 3, "successfulli": 3, "success": [3, 4], "compress": 3, "json_fil": [3, 4], "output_dir": [3, 4], "merg": 3, "line": [3, 4], "singl": 3, "signatur": 3, "write": [3, 4], "sort": 3, "serial": 3, "rytp": 3, "sort_kei": 3, "expect": 3, "concaten": 3, "init_log": 3, "initialis": 3, "logger": 3, "int": [3, 4], "desir": [3, 4], "rootlogg": 3, "duplic": 3, "init_logg": 3, "could": 3, "work": 3, "properli": 3, "so": 3, "keep": [3, 4], "rebuild_for_passim": 3, "article_metadata": 3, "rebuild_for_solr": 3, "metadata": [3, 4], "thought": 3, "especi": 3, "ingest": 3, "solr": 3, "index": 3, "dictionari": [3, 4], "follow": [3, 4], "tbd": 3, "rebuild_issu": 3, "dask_client": 3, "filter_languag": 3, "outp_dir": 3, "store": [3, 4], "rebuild_text": 3, "conform": 3, "schema": 3, "previou": 3, "If": [3, 4], "append": 3, "fulltext": 3, "offset": [3, 4], "token": 3, "region": 3, "rebuild_text_passim": 3, "group": 3, "pages_to_articl": 3, "belong": 3, "read_issu": 3, "s3_client": 3, "inject": 3, "s3_version": 3, "boto3": [3, 4], "resourc": [3, 4], "factori": [3, 4], "serviceresourc": [3, 4], "connect": [3, 4], "storag": 3, "represent": 3, "read_issue_pag": 3, "issue_json": 3, "parallel": [3, 4], "read_pag": 3, "page_kei": 3, "rejoin_articl": 3, "text_apply_break": 3, "break": [3, 4], "appli": 3, "visual": 3, "charact": 3, "paragraph": 3, "etc": 3, "chunk": [3, 4], "cluster": 3, "chunksiz": 4, "yield": 4, "get_pkg_resourc": 4, "file_manag": 4, "exitstack": 4, "packag": 4, "posixpath": 4, "manag": 4, "instanti": 4, "prior": 4, "call": 4, "close": 4, "onc": 4, "longer": 4, "contextlib": 4, "pathlib": 4, "parse_json": 4, "drive": 4, "boto": 4, "kept": 4, "until": 4, "third": 4, "parti": 4, "lib": 4, "depend": 4, "solv": 4, "alternative_read_text": 4, "s3_kei": 4, "s3_credenti": 4, "reason": 4, "bug": 4, "bag": 4, "read_text": 4, "1000": 4, "rais": 4, "filenotfounderror": 4, "fixed_s3fs_glob": 4, "boto3_bucket": 4, "benoit": 4, "pyimag": 4, "custom": 4, "glob": 4, "s3f": 4, "unabl": 4, "more": 4, "than": 4, "element": 4, "switch": 4, "get_boto3_bucket": 4, "true": 4, "request": 4, "ask": 4, "case": 4, "doe": 4, "turn": 4, "newli": 4, "testb": 4, "depreci": 4, "pleas": 4, "priorit": 4, "get_or_create_bucket": 4, "instead": 4, "yet": 4, "get_bucket_boto3": 4, "get_s3_client": 4, "host_url": 4, "zhdk": 4, "cloud": 4, "get_s3_connect": 4, "host": 4, "assum": 4, "two": 4, "environ": 4, "variabl": 4, "se_access_kei": 4, "se_secret_kei": 4, "get_s3_resourc": 4, "endpoint": 4, "relat": 4, "get_s3_vers": 4, "inform": 4, "modifi": 4, "datetim": 4, "get_s3_versions_cli": 4, "get_storage_opt": 4, "read_jsonlin": 4, "point": 4, "extract": 4, "doc": 4, "per": 4, "db": 4, "from_sequ": 4, "s3r": 4, "print": 4, "count": 4, "map": 4, "pluck": 4, "ft": 4, "without": 4, "readtext_jsonlin": 4, "limit": 4, "textual": 4, "leav": 4, "out": 4, "serv": 4, "pure": 4, "process": 4, "ne": 4, "reus": 4, "topic": 4, "s3_get_articl": 4, "ad": 4, "advertis": 4, "iter_bucket": 4, "cpu": 4, "s3_get_pag": 4, "issue_id": 4, "page_nam": 4, "imp": 4, "1990": 4, "03": 4, "partition_nam": 4, "newspaper_prefix": 4, "help": 4, "prepar": 4, "view": 4, "distribut": 4, "orient": 4, "daskutil": 4, "cf": 4, "p": 4, "variou": 4, "argument": 4, "create_even_partit": 4, "config_newspap": 4, "local_f": 4, "keep_ful": 4, "nb_partit": 4, "500": 4, "yearli": 4, "even": 4, "enabl": 4, "effici": 4, "bypass": 4, "shuffl": 4, "well": 4, "decid": 4, "what": 4, "memori": 4, "span": 4, "classic": 4, "produc": 4, "arg": 4, "partition": 4, "nbpart": 4, "export": 4, "compute_image_link": 4, "ci": 4, "pad": 4, "20": 4, "iiif_endpoint": 4, "iiif_link": 4, "summari": 4, "descript": 4, "get_iiif_link": 4, "canonical_bucket": 4, "retriev": 4, "link": 4, "rebuilt2xmi": 4, "typesystem_path": 4, "iiif_map": 4, "pct_coordin": 4, "typesystem": 4, "defit": 4, "annot": 4, "layer": 4, "task": 4, "config_load": 4, "initi": 4, "method": 4, "check_bucket": 4, "attribut": 4, "check_param": 4, "classmethod": 4, "from_json": 4, "to_dict": 4, "partitionerconfig": 4, "As": 4, "now": 4, "solr_serv": 4, "server": 4, "solr_cor": 4, "core": 4, "s3_host": 4, "s3_bucket_rebuilt": 4, "s3_bucket_partit": 4, "s3_bucket_process": 4, "key_batch": 4, "batch": 4, "number_partit": 4, "detail": 4, "1991": 4, "1998": 4}, "objects": {"impresso_commons.images": [[0, 0, 0, "-", "img_utils"], [0, 0, 0, "-", "olive_boxes"]], "impresso_commons.images.img_utils": [[0, 1, 1, "", "BoxStrategy"], [0, 3, 1, "", "compose"], [0, 3, 1, "", "get_img_from_archive"], [0, 3, 1, "", "get_imgdimensions"], [0, 3, 1, "", "get_jpg"], [0, 3, 1, "", "get_page_folders"], [0, 3, 1, "", "get_png"], [0, 3, 1, "", "get_tif"], [0, 3, 1, "", "run_cmd"]], "impresso_commons.images.img_utils.BoxStrategy": [[0, 2, 1, "", "jpg_highest"], [0, 2, 1, "", "jpg_uniq"], [0, 2, 1, "", "png_highest"], [0, 2, 1, "", "png_uniq"], [0, 2, 1, "", "tif"]], "impresso_commons.images.olive_boxes": [[0, 3, 1, "", "compute_box"], [0, 3, 1, "", "compute_scale_factor"], [0, 3, 1, "", "convert_box"], [0, 3, 1, "", "get_iiif_url"], [0, 3, 1, "", "get_scale_factor"], [0, 3, 1, "", "test"]], "impresso_commons": [[2, 0, 0, "-", "path"]], "impresso_commons.path": [[2, 3, 1, "", "id2IssueDir"], [2, 3, 1, "", "parse_canonical_filename"], [2, 0, 0, "-", "path_fs"], [2, 0, 0, "-", "path_s3"]], "impresso_commons.path.path_fs": [[2, 2, 1, "", "ContentItem"], [2, 1, 1, "", "IssueDir"], [2, 3, 1, "", "canonical_path"], [2, 3, 1, "", "check_filenaming"], [2, 3, 1, "", "detect_canonical_issues"], [2, 3, 1, "", "detect_issues"], [2, 3, 1, "", "detect_journal_issues"], [2, 3, 1, "", "get_issueshortpath"], [2, 3, 1, "", "pair_issue"], [2, 3, 1, "", "select_issues"]], "impresso_commons.path.path_fs.IssueDir": [[2, 2, 1, "", "date"], [2, 2, 1, "", "edition"], [2, 2, 1, "", "journal"], [2, 2, 1, "", "path"]], "impresso_commons.path.path_s3": [[2, 2, 1, "", "IssueDir"], [2, 3, 1, "", "impresso_iter_bucket"], [2, 3, 1, "", "read_s3_issues"], [2, 1, 1, "", "s3ContentItem"], [2, 3, 1, "", "s3_filter_archives"], [2, 3, 1, "", "s3_iter_bucket"]], "impresso_commons.text": [[3, 0, 0, "-", "helpers"], [3, 0, 0, "-", "rebuilder"]], "impresso_commons.text.helpers": [[3, 3, 1, "", "pages_to_article"], [3, 3, 1, "", "read_issue"], [3, 3, 1, "", "read_issue_pages"], [3, 3, 1, "", "read_page"], [3, 3, 1, "", "rejoin_articles"], [3, 3, 1, "", "text_apply_breaks"]], "impresso_commons.text.rebuilder": [[3, 3, 1, "", "cleanup"], [3, 3, 1, "", "compress"], [3, 3, 1, "", "init_logging"], [3, 3, 1, "", "main"], [3, 3, 1, "", "rebuild_for_passim"], [3, 3, 1, "", "rebuild_for_solr"], [3, 3, 1, "", "rebuild_issues"], [3, 3, 1, "", "rebuild_text"], [3, 3, 1, "", "rebuild_text_passim"], [3, 3, 1, "", "upload"]], "impresso_commons.utils": [[4, 0, 0, "-", "config_loader"], [4, 0, 0, "-", "daskutils"], [4, 0, 0, "-", "s3"], [4, 0, 0, "-", "uima"], [4, 0, 0, "-", "utils"]], "impresso_commons.utils.config_loader": [[4, 1, 1, "", "Base"], [4, 1, 1, "", "PartitionerConfig"], [4, 3, 1, "", "main"]], "impresso_commons.utils.config_loader.Base": [[4, 4, 1, "", "check_bucket"], [4, 4, 1, "", "check_params"], [4, 4, 1, "", "from_json"], [4, 4, 1, "", "to_dict"]], "impresso_commons.utils.daskutils": [[4, 3, 1, "", "create_even_partitions"], [4, 3, 1, "", "main"], [4, 3, 1, "", "partitioner"]], "impresso_commons.utils.s3": [[4, 3, 1, "", "alternative_read_text"], [4, 3, 1, "", "fixed_s3fs_glob"], [4, 3, 1, "", "get_boto3_bucket"], [4, 3, 1, "", "get_bucket"], [4, 3, 1, "", "get_bucket_boto3"], [4, 3, 1, "", "get_or_create_bucket"], [4, 3, 1, "", "get_s3_client"], [4, 3, 1, "", "get_s3_connection"], [4, 3, 1, "", "get_s3_resource"], [4, 3, 1, "", "get_s3_versions"], [4, 3, 1, "", "get_s3_versions_client"], [4, 3, 1, "", "get_storage_options"], [4, 3, 1, "", "read_jsonlines"], [4, 3, 1, "", "readtext_jsonlines"], [4, 3, 1, "", "s3_get_articles"], [4, 3, 1, "", "s3_get_pages"], [4, 3, 1, "", "upload"]], "impresso_commons.utils.uima": [[4, 3, 1, "", "compute_image_links"], [4, 3, 1, "", "get_iiif_links"], [4, 3, 1, "", "rebuilt2xmi"]], "impresso_commons.utils.utils": [[4, 3, 1, "", "chunk"], [4, 3, 1, "", "get_pkg_resource"], [4, 3, 1, "", "parse_json"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:attribute", "3": "py:function", "4": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "attribute", "Python attribute"], "3": ["py", "function", "Python function"], "4": ["py", "method", "Python method"]}, "titleterms": {"imag": 0, "handl": 0, "util": [0, 4], "oliv": 0, "box": 0, "background": 0, "inform": 0, "case": 0, "1": 0, "tif": 0, "2": 0, "sever": 0, "png": 0, "3": 0, "one": 0, "onli": 0, "4": 0, "jpg": 0, "welcom": 1, "impresso": 1, "pycommon": 1, "": 1, "document": 1, "content": 1, "input": 2, "output": 2, "gener": 2, "i": 2, "o": 2, "from": 2, "file": [2, 3, 4], "system": 2, "s3": [2, 4], "text": 3, "rebuild": 3, "function": [3, 4], "helper": 3, "config": [3, 4], "exampl": 3, "basic": 4, "dask": 4, "apach": 4, "uima": 4, "xmi": 4, "loader": 4}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.todo": 2, "sphinx": 60}, "alltitles": {"Image handling": [[0, "image-handling"]], "Image Utils": [[0, "module-impresso_commons.images.img_utils"]], "Olive Boxes": [[0, "module-impresso_commons.images.olive_boxes"]], "Background information": [[0, "background-information"]], "Case 1: tif": [[0, "case-1-tif"]], "Case 2: several png": [[0, "case-2-several-png"]], "Case 3: one png only": [[0, "case-3-one-png-only"]], "Case 4: one jpg only": [[0, "case-4-one-jpg-only"]], "Welcome to Impresso PyCommons\u2019s documentation!": [[1, "welcome-to-impresso-pycommons-s-documentation"]], "Contents:": [[1, null]], "Input/Output": [[2, "input-output"]], "General": [[2, "module-impresso_commons.path"]], "I/O from file system": [[2, "module-impresso_commons.path.path_fs"]], "I/O from S3": [[2, "module-impresso_commons.path.path_s3"]], "Text Rebuild": [[3, "text-rebuild"]], "Rebuild functions": [[3, "rebuild-functions"]], "Helpers": [[3, "module-impresso_commons.text.helpers"]], "Config file example": [[3, "config-file-example"]], "Utilities": [[4, "utilities"]], "Basic Utils Functions": [[4, "module-impresso_commons.utils.utils"]], "S3 Utils Functions": [[4, "module-impresso_commons.utils.s3"]], "Dask Utils Functions": [[4, "module-impresso_commons.utils.daskutils"]], "Apache UIMA XMI Utils Functions": [[4, "module-impresso_commons.utils.uima"]], "Config File Loader": [[4, "module-impresso_commons.utils.config_loader"]]}, "indexentries": {"boxstrategy (class in impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.BoxStrategy"]], "compose() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.compose"]], "compute_box() (in module impresso_commons.images.olive_boxes)": [[0, "impresso_commons.images.olive_boxes.compute_box"]], "compute_scale_factor() (in module impresso_commons.images.olive_boxes)": [[0, "impresso_commons.images.olive_boxes.compute_scale_factor"]], "convert_box() (in module impresso_commons.images.olive_boxes)": [[0, "impresso_commons.images.olive_boxes.convert_box"]], "get_iiif_url() (in module impresso_commons.images.olive_boxes)": [[0, "impresso_commons.images.olive_boxes.get_iiif_url"]], "get_img_from_archive() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.get_img_from_archive"]], "get_imgdimensions() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.get_imgdimensions"]], "get_jpg() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.get_jpg"]], "get_page_folders() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.get_page_folders"]], "get_png() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.get_png"]], "get_scale_factor() (in module impresso_commons.images.olive_boxes)": [[0, "impresso_commons.images.olive_boxes.get_scale_factor"]], "get_tif() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.get_tif"]], "impresso_commons.images.img_utils": [[0, "module-impresso_commons.images.img_utils"]], "impresso_commons.images.olive_boxes": [[0, "module-impresso_commons.images.olive_boxes"]], "jpg_highest (impresso_commons.images.img_utils.boxstrategy attribute)": [[0, "impresso_commons.images.img_utils.BoxStrategy.jpg_highest"]], "jpg_uniq (impresso_commons.images.img_utils.boxstrategy attribute)": [[0, "impresso_commons.images.img_utils.BoxStrategy.jpg_uniq"]], "module": [[0, "module-impresso_commons.images.img_utils"], [0, "module-impresso_commons.images.olive_boxes"], [2, "module-impresso_commons.path"], [2, "module-impresso_commons.path.path_fs"], [2, "module-impresso_commons.path.path_s3"], [3, "module-impresso_commons.text.helpers"], [3, "module-impresso_commons.text.rebuilder"], [4, "module-impresso_commons.utils.config_loader"], [4, "module-impresso_commons.utils.daskutils"], [4, "module-impresso_commons.utils.s3"], [4, "module-impresso_commons.utils.uima"], [4, "module-impresso_commons.utils.utils"]], "png_highest (impresso_commons.images.img_utils.boxstrategy attribute)": [[0, "impresso_commons.images.img_utils.BoxStrategy.png_highest"]], "png_uniq (impresso_commons.images.img_utils.boxstrategy attribute)": [[0, "impresso_commons.images.img_utils.BoxStrategy.png_uniq"]], "run_cmd() (in module impresso_commons.images.img_utils)": [[0, "impresso_commons.images.img_utils.run_cmd"]], "test() (in module impresso_commons.images.olive_boxes)": [[0, "impresso_commons.images.olive_boxes.test"]], "tif (impresso_commons.images.img_utils.boxstrategy attribute)": [[0, "impresso_commons.images.img_utils.BoxStrategy.tif"]], "contentitem (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.ContentItem"]], "issuedir (class in impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.IssueDir"]], "issuedir (in module impresso_commons.path.path_s3)": [[2, "impresso_commons.path.path_s3.IssueDir"]], "canonical_path() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.canonical_path"]], "check_filenaming() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.check_filenaming"]], "date (impresso_commons.path.path_fs.issuedir attribute)": [[2, "impresso_commons.path.path_fs.IssueDir.date"]], "detect_canonical_issues() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.detect_canonical_issues"]], "detect_issues() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.detect_issues"]], "detect_journal_issues() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.detect_journal_issues"]], "edition (impresso_commons.path.path_fs.issuedir attribute)": [[2, "impresso_commons.path.path_fs.IssueDir.edition"]], "get_issueshortpath() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.get_issueshortpath"]], "id2issuedir() (in module impresso_commons.path)": [[2, "impresso_commons.path.id2IssueDir"]], "impresso_commons.path": [[2, "module-impresso_commons.path"]], "impresso_commons.path.path_fs": [[2, "module-impresso_commons.path.path_fs"]], "impresso_commons.path.path_s3": [[2, "module-impresso_commons.path.path_s3"]], "impresso_iter_bucket() (in module impresso_commons.path.path_s3)": [[2, "impresso_commons.path.path_s3.impresso_iter_bucket"]], "journal (impresso_commons.path.path_fs.issuedir attribute)": [[2, "impresso_commons.path.path_fs.IssueDir.journal"]], "pair_issue() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.pair_issue"]], "parse_canonical_filename() (in module impresso_commons.path)": [[2, "impresso_commons.path.parse_canonical_filename"]], "path (impresso_commons.path.path_fs.issuedir attribute)": [[2, "impresso_commons.path.path_fs.IssueDir.path"]], "read_s3_issues() (in module impresso_commons.path.path_s3)": [[2, "impresso_commons.path.path_s3.read_s3_issues"]], "s3contentitem (class in impresso_commons.path.path_s3)": [[2, "impresso_commons.path.path_s3.s3ContentItem"]], "s3_filter_archives() (in module impresso_commons.path.path_s3)": [[2, "impresso_commons.path.path_s3.s3_filter_archives"]], "s3_iter_bucket() (in module impresso_commons.path.path_s3)": [[2, "impresso_commons.path.path_s3.s3_iter_bucket"]], "select_issues() (in module impresso_commons.path.path_fs)": [[2, "impresso_commons.path.path_fs.select_issues"]], "cleanup() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.cleanup"]], "compress() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.compress"]], "impresso_commons.text.helpers": [[3, "module-impresso_commons.text.helpers"]], "impresso_commons.text.rebuilder": [[3, "module-impresso_commons.text.rebuilder"]], "init_logging() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.init_logging"]], "main() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.main"]], "pages_to_article() (in module impresso_commons.text.helpers)": [[3, "impresso_commons.text.helpers.pages_to_article"]], "read_issue() (in module impresso_commons.text.helpers)": [[3, "impresso_commons.text.helpers.read_issue"]], "read_issue_pages() (in module impresso_commons.text.helpers)": [[3, "impresso_commons.text.helpers.read_issue_pages"]], "read_page() (in module impresso_commons.text.helpers)": [[3, "impresso_commons.text.helpers.read_page"]], "rebuild_for_passim() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.rebuild_for_passim"]], "rebuild_for_solr() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.rebuild_for_solr"]], "rebuild_issues() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.rebuild_issues"]], "rebuild_text() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.rebuild_text"]], "rebuild_text_passim() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.rebuild_text_passim"]], "rejoin_articles() (in module impresso_commons.text.helpers)": [[3, "impresso_commons.text.helpers.rejoin_articles"]], "text_apply_breaks() (in module impresso_commons.text.helpers)": [[3, "impresso_commons.text.helpers.text_apply_breaks"]], "upload() (in module impresso_commons.text.rebuilder)": [[3, "impresso_commons.text.rebuilder.upload"]], "base (class in impresso_commons.utils.config_loader)": [[4, "impresso_commons.utils.config_loader.Base"]], "partitionerconfig (class in impresso_commons.utils.config_loader)": [[4, "impresso_commons.utils.config_loader.PartitionerConfig"]], "alternative_read_text() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.alternative_read_text"]], "check_bucket() (impresso_commons.utils.config_loader.base method)": [[4, "impresso_commons.utils.config_loader.Base.check_bucket"]], "check_params() (impresso_commons.utils.config_loader.base method)": [[4, "impresso_commons.utils.config_loader.Base.check_params"]], "chunk() (in module impresso_commons.utils.utils)": [[4, "impresso_commons.utils.utils.chunk"]], "compute_image_links() (in module impresso_commons.utils.uima)": [[4, "impresso_commons.utils.uima.compute_image_links"]], "create_even_partitions() (in module impresso_commons.utils.daskutils)": [[4, "impresso_commons.utils.daskutils.create_even_partitions"]], "fixed_s3fs_glob() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.fixed_s3fs_glob"]], "from_json() (impresso_commons.utils.config_loader.base class method)": [[4, "impresso_commons.utils.config_loader.Base.from_json"]], "get_boto3_bucket() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_boto3_bucket"]], "get_bucket() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_bucket"]], "get_bucket_boto3() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_bucket_boto3"]], "get_iiif_links() (in module impresso_commons.utils.uima)": [[4, "impresso_commons.utils.uima.get_iiif_links"]], "get_or_create_bucket() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_or_create_bucket"]], "get_pkg_resource() (in module impresso_commons.utils.utils)": [[4, "impresso_commons.utils.utils.get_pkg_resource"]], "get_s3_client() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_s3_client"]], "get_s3_connection() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_s3_connection"]], "get_s3_resource() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_s3_resource"]], "get_s3_versions() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_s3_versions"]], "get_s3_versions_client() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_s3_versions_client"]], "get_storage_options() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.get_storage_options"]], "impresso_commons.utils.config_loader": [[4, "module-impresso_commons.utils.config_loader"]], "impresso_commons.utils.daskutils": [[4, "module-impresso_commons.utils.daskutils"]], "impresso_commons.utils.s3": [[4, "module-impresso_commons.utils.s3"]], "impresso_commons.utils.uima": [[4, "module-impresso_commons.utils.uima"]], "impresso_commons.utils.utils": [[4, "module-impresso_commons.utils.utils"]], "main() (in module impresso_commons.utils.config_loader)": [[4, "impresso_commons.utils.config_loader.main"]], "main() (in module impresso_commons.utils.daskutils)": [[4, "impresso_commons.utils.daskutils.main"]], "parse_json() (in module impresso_commons.utils.utils)": [[4, "impresso_commons.utils.utils.parse_json"]], "partitioner() (in module impresso_commons.utils.daskutils)": [[4, "impresso_commons.utils.daskutils.partitioner"]], "read_jsonlines() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.read_jsonlines"]], "readtext_jsonlines() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.readtext_jsonlines"]], "rebuilt2xmi() (in module impresso_commons.utils.uima)": [[4, "impresso_commons.utils.uima.rebuilt2xmi"]], "s3_get_articles() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.s3_get_articles"]], "s3_get_pages() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.s3_get_pages"]], "to_dict() (impresso_commons.utils.config_loader.base method)": [[4, "impresso_commons.utils.config_loader.Base.to_dict"]], "upload() (in module impresso_commons.utils.s3)": [[4, "impresso_commons.utils.s3.upload"]]}})